<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="@Akashi_SN">
    <link rel="icon" href="../../favicon.ico">

    <title>Dashboard</title>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/css/admin.css" rel="stylesheet">
  </head>

  <body>
    <nav class="navbar navbar-toggleable-md navbar-inverse fixed-top bg-inverse">
      <a class="navbar-brand" href="/admin/home/overview">CHUNITHM Rate Calculator</a>

      <div class="collapse navbar-collapse">
        <ul class="navbar-nav mr-auto">
        {% if page == 'Home' %}
          <li class="nav-item active">
            <a class="nav-link" href="/admin/home/overview">Home <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/user">Users</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/music/unregistered">Music</a>
          </li>
        {% elif page == 'Users' %}
          <li class="nav-item">
            <a class="nav-link" href="/admin/home/overview">Home</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="/admin/user">Users <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/music/unregistered">Music</a>
          </li>
        {% elif page == 'Music' %}
          <li class="nav-item">
            <a class="nav-link" href="/admin/home/overview">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/user">Users</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="/admin/music/unregistered">Music <span class="sr-only">(current)</span></a>
          </li>
        {% endif %}
        </ul>
      </div>
      <div class="mt-2 mt-md-0">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="/admin/logout">Logout</a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <nav class="col-sm-3 col-md-2 hidden-xs-down bg-faded sidebar">
          <ul class="nav nav-pills flex-column">
          {% if page == 'Home'%}
            <label class="label number">ユーザー数:{{ Number_of_Users }}</label>
            {% if frame == 'overview' %}
              <li class="nav-item">
                <a class="nav-link active" href="/admin/home/overview">Overview <span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/admin/home/analytics">Analytics</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/admin/home/error">Errors</a>
              </li>
            {% elif frame == 'analytics' %}
              <li class="nav-item">
                <a class="nav-link" href="/admin/home/overview">Overview</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="/admin/home/analytics">Analytics <span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/admin/home/error">Errors</a>
              </li>
            {% elif frame == 'error' %}
              <li class="nav-item">
                <a class="nav-link" href="/admin/home/overview">Overview</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/admin/home/analytics">Analytics</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="/admin/home/error">Errors <span class="sr-only">(current)</span></a>
              </li>
            {% endif %}
          {% elif page == 'Users' %}
            <label class="label number">ユーザー数:{{ Number_of_Users }}</label>
            <label class="label">フィルター</label>
            <li class="nav-item">
              <form>
                <div class="form-group nav-link">
                  <label for="UserName">UserName:</label>
                  <input type="text" class="form-control" name="UserName" id="UserName">
                  <label for="FriendCode">FriendCode:</label>
                  <input type="text" class="form-control" name="FriendCode" id="FriendCode">
                  <label for="DispRate">DispRate:</label>
                  <input type="text" class="form-control" name="DispRate" id="DispRate">
                  <label for="HighestRating">HighestRating:</label>
                  <input type="text" class="form-control" name="HighestRating" id="HighestRating">
                  <label for="MaxRate">MaxRate:</label>
                  <input type="text" class="form-control" name="MaxRate" id="MaxRate">
                  <label for="BestRate">BestRate:</label>
                  <input type="text" class="form-control" name="BestRate" id="BestRate">
                  <label for="RecentRate">RecentRate:</label>
                  <input type="text" class="form-control" name="RecentRate" id="RecentRate">
                  <button type="submit" class="btn btn-default">検索</button>
                </div>
              </form>
            </li>
          {% elif page == 'Music' %}
            {% if frame == 'unregistered' %}
              <li class="nav-item">
                <a class="nav-link active" href="/admin/music/unregistered">Unregistered <span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/admin/music/registered">Registered</a>
              </li>
            {% elif frame == 'registered' %}
              <li class="nav-item">
                <a class="nav-link" href="/admin/music/unregistered">Unregistered</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="/admin/music/registered">Registered <span class="sr-only">(current)</span></a>
              </li>
            {% endif %}
          {% endif %}
          </ul>
        </nav>
        
        <main class="col-sm-9 offset-sm-3 col-md-10 offset-md-2 pt-3">
          {% if page == 'Music' %}
            {% if frame == 'unregistered' %}
              <h2>未登録楽曲一覧</h2>
              <div class="table-responsive">
                <table class="table table-striped" id="sorter">
                  <thead>
                    <tr>
                      <th>MusicId</th>
                      <th>Level</th>
                      <th>MusicImage</th>
                      <th>MusicName</th>
                      <th>ArtistName</th>
                      <th>BaseRate</th>
                      <th>AirPlus</th>
                    </tr>
                  </thead>
                  <tbody>
                  {% for Music in NoneMusicList %}
                    <tr>
                      <td>{{ Music.MusicId }}</td>
                      {% if Music.Level == 2 %}
                        <th style="color: #A00A50">Expert</th>
                      {% elif Music.Level == 3%}
                        <th style="color: #8200DC">Master</th>
                      {% endif %}
                      <td><img src="https://chunithm-net.com/mobile/{{ Music.MusicImage }}" /></td>
                      <td>{{ Music.MusicName }}</td>
                      <td>{{ Music.ArtistName }}</td>
                      {% if session.logged_in %}
                        <form>                          
                          <td><input class="form-control" type="text" name="BaseRate" value="{{ Music.BaseRate}}"></td>
                        </form>  
                      {% else %}
                        <td>{{ Music.BaseRate}}</td>
                      {% endif %}
                      <td>{{ Music.AirPlus }}</td>
                    </tr>
                  {% endfor %}
                  </tbody>
                </table>
              </div>
            {% elif frame == 'registered' %}
              <h2>登録楽曲一覧</h2>
              <div class="table-responsive">
                <table class="table table-striped" id="sorter">
                  <thead>
                    <tr>
                      <th>MusicId</th>
                      <th>Level</th>
                      <th>MusicImage</th>
                      <th>MusicName</th>
                      <th>ArtistName</th>
                      <th>BaseRate</th>
                      <th>AirPlus</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for Music in ExistMusicList %}
                      <tr>
                        <td>{{ Music.MusicId }}</td>
                        {% if Music.Level == 2 %}
                          <th style="color: #A00A50">Expert</th>
                        {% elif Music.Level == 3%}
                          <th style="color: #8200DC">Master</th>
                        {% endif %}
                        <td><img src="https://chunithm-net.com/mobile/{{ Music.MusicImage }}" /></td>
                        <td>{{ Music.MusicName }}</td>
                        <td>{{ Music.ArtistName }}</td>
                        {% if session.logged_in %}
                          <form>                          
                            <td><input class="form-control" type="text" name="BaseRate" value="{{ Music.BaseRate}}"></td>
                          </form>  
                        {% else %}
                          <td>{{ Music.BaseRate}}</td>
                        {% endif %}
                        <td>{{ Music.AirPlus }}</td>
                      </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            {% endif %}
          {% else %}
          {% if frame == 'overview' %}
            <h2>トップ10</h2>
          {% elif page == 'Users'%}
            <h2>ユーザー一覧</h2>
          {% endif %}
            <div class="table-responsive">
              <table class="table table-striped" id="sorter">
                <thead>
                  <tr>
                    <th>UserName</th>
                    <th>FreindCode</th>
                    <th>Credits</th>
                    <th>DispRate</th>
                    <th>HighestRating</th>
                    <th>MaxRate</th>
                    <th>BestRate</th>
                    <th>RecentRate</th>
                  </tr>
                </thead>
                <tbody>
                {% for User in Users %}
                  <tr>
                    <td>{{ User.UserName }}</td>
                    <td><a href="https://chunical.net/chunithm/user/{{ User.Hash }}" target="_blank">{{ User.FriendCode }}</a></td>
                    <td>{{ User.Credits }}</td>
                    <td>{{ User.DispRate }}</td>
                    <td>{{ User.HighestRating }}</td>
                    <td>{{ User.MaxRate }}</td>
                    <td>{{ User.BestRate }}</td>
                    <td>{{ User.RecentRate }}</td>
                  </tr>
                {% endfor %}
                </tbody>
              </table>
            </div>
        {% endif %}
        </main>
      </div>
    </div>

    <script type="text/javascript" src="/static/js/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="/static/js/jquery.tablesorter.min.js"></script>
    <script type="text/javascript">
      $(function() {
        $('#sorter').tablesorter();
      });
    </script>
  </body>
</html>
